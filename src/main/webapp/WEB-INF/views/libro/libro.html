<!DOCTYPE html>
<html th:lang="${#locale.language}"
      th:replace="~{layout/default :: layout (~{::#title}, ~{::#content}, ~{::#links}, ~{::#scripts})}"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title id="title">Unicorn Book - Título</title>
</head>
<body>
<div id="links"></div>
<div id="scripts">
    <script th:src="@{/resources/js/carrito.js}"></script>

</div>

<div class="page-content" id="content">
    <div class="container-full">
        <div class="d-flex justify-content-center">
            <div class="container">
                <nav aria-label="breadcrumb"
                     style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;); background: transparent;">
                    <ol class="breadcrumb justify-content-center">
                        <li class="breadcrumb-item"><a class="simple-link" th:href="@{/}">Inicio</a></li>
                        <li aria-current="page" class="breadcrumb-item active"><a class="simple-link"
                                                                                  th:href="@{/libro/__${libro.id}__}"
                                                                                  th:text="${libro.titulo}"></a></li>
                    </ol>
                </nav>
                <div class="row">
                    <div class="col-sm-3">
                        <img alt="Portada" class="card-img- shadow-lg mt-0 mb-5 bg-dark rounded"
                             style="height: 35vh; margin: auto" th:src="${libro.linkPortada}">
                    </div>
                    <div class="col-sm-6">
                        <div class="row">
                            <div class="col">
                                <h1 th:text="${libro.titulo}"></h1>
                                <h4><strong th:text="${libro.subtitulo}"></strong></h4>
                                <h6>
                                    <strong>
                                        <a class="link-primary" th:href="@{/autor/__${libro.autorId}__}">
                                            <span th:text="${libro.autorNombre}"></span> <em class="fa fa-link"></em>
                                        </a>
                                    </strong>
                                </h6>
                                <div class="mb-2">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <p th:text="${libro.sinopsis}"></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <ul>
                                    <li><strong>Colección: </strong><span th:text="${libro.coleccionNombre}"></span>
                                    </li>
                                    <!--<li><strong>Temática: </strong>
                                        <th:block th:each="tematica, iter:${libro.tematicas}">
                                            <span th:text="${tematica.nombre}"></span>
                                            <span th:if="${iter.index!=#lists.size(libro.tematicas)-1}">, </span>
                                        </th:block>
                                    </li>-->
                                    <li><strong>Editorial: </strong><span th:text="${libro.editorialNombre}"></span>
                                    </li>

                                    <li><strong>Fecha disponibilidad: </strong><span
                                            th:text="${#dates.format(libro.fechaDisponible, 'dd-MM-yyyy')}"></span></li>
                                    <li><strong>Fecha publicación: </strong><span
                                            th:text="${#dates.format(libro.fechaPublicacion, 'dd-MM-yyyy')}"></span>
                                    </li>
                                    <li><strong>Fecha edición: </strong><span
                                            th:text="${#dates.format(libro.fechaEdicion, 'dd-MM-yyyy')}"></span></li>

                                    <li><strong>Formato: </strong><span th:text="${libro.formato}"></span></li>
                                    <li><strong>Nº páginas: </strong><span th:text="${libro.paginas}"></span></li>
                                    <li><strong>Idioma: </strong><span th:text="${libro.idioma}"></span></li>
                                    <li><strong>Notas: </strong><span th:text="${libro.notas}"></span></li>
                                </ul>
                                <p th:text="${libro.isbn}"></p>
                                <p th:text="${libro.stock}"></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card-body h-50 d-flex align-items-end justify-content-center justify-content-center">
                            <h5 class="mb-0 text-primary text-center"
                                th:text="|${#numbers.formatDecimal(libro.precio, 0, 'POINT', 2, 'COMMA')} €|">
                                Precio</h5>
                        </div>
                        <div class="card-body h-50 d-flex align-items-start justify-content-center justify-content-center" th:with="conStock=${libro.stock != null && libro.stock > 0}">
                            <div class="p-1">
                                <div class="col-md-4 d-flex align-items-center justify-content-center">
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <label class="input-group-text" for="inputGroupSelect01">Cantidad</label>
                                        </div>
                                        <select class="custom-select" name="cantidad" id="inputGroupSelect01">
                                            <option th:each="i: ${#numbers.sequence(1, libro.stock)}" th:data-id-libro="${libro.id}" th:value="${i}" th:text="|x${i}|"></option>
                                        </select>
                                    </div>
                                </div>
                                <a class="btn btn-primary mr-5 actualizar-carrito" th:disabled="${!conStock}">
                                    <em class="fa fa-shopping-basket"></em>
                                    <span th:if="${conStock}">Añadir al carrito</span>
                                    <span th:unless="${conStock}">Sin stock</span>
                                </a>
                            </div>
                            <div class="p-1" th:unless="${conStock}">
                                <a class="btn btn-secondary"
                                   th:href="@{/contacto?tipo=encargo&libro=__${libro.id}__}">
                                    <span>Encargar</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
